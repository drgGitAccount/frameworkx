const fs = require('fs-extra');
const path = require('path');

async function buildJS() {
  console.log('Building JavaScript...');
  
  // Ensure dist directory exists
  await fs.ensureDir('dist');
  
  // Read all JS files from src/js
  const jsDir = path.join(__dirname, '../src/js');
  const jsFiles = await fs.readdir(jsDir);
  
  let combinedJS = '// FrameworkX JavaScript Bundle\n';
  combinedJS += '// Generated by build script\n\n';
  
  for (const file of jsFiles.sort()) {
    if (file.endsWith('.js')) {
      const filePath = path.join(jsDir, file);
      const content = await fs.readFile(filePath, 'utf8');
      combinedJS += `// File: ${file}\n`;
      combinedJS += content + '\n\n';
    }
  }
  
  // Write the combined JS to dist
  await fs.writeFile('dist/frameworkx.js', combinedJS);
  console.log('JavaScript built successfully!');
}

buildJS().catch(console.error);
